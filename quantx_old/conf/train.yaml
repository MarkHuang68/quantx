# train.yaml - æ¸¬è©¦ç”¨æœ€å°åŒ–é…ç½®

schedule:
  ml_train_minutes: 10080      # æ¯ 10080(1W) åˆ†é˜è·‘ä¸€æ¬¡ ML è¨“ç·´
  strategy_train_minutes: 1440 # æ¯ 1440(1D) åˆ†é˜è·‘ä¸€æ¬¡ ç­–ç•¥è¨“ç·´
  train_retry_minutes: 360     # æ¯ 180(3H) åˆ†é˜å•Ÿå‹•é‡æ–°è¨“ç·´
  train_window_days: 365

features:
  htf_timeframe: '1d'  # åœ¨æ­¤è™•å®šç¾©æ‚¨æƒ³è¦çš„æ›´é«˜æ™‚é–“é€±æœŸ (ä¾‹å¦‚ '1d', '1w')

  ta_features_params:
    ema_fast: [5, 10]         # è®“ ML å˜—è©¦ 5 å’Œ 10 å…©ç¨®é•·åº¦
    ema_slow: [20, 30]        # è®“ ML å˜—è©¦ 20 å’Œ 30 å…©ç¨®é•·åº¦
    rsi_len: [7, 14]          # è®“ ML å˜—è©¦ 7 å’Œ 14 å…©ç¨®é•·åº¦
    atr_len: 20
    roc_long: 15

# ğŸŸ¢ æ–°å¢ï¼šæ¨™ç±¤ç”Ÿæˆç­–ç•¥è¨­å®š
labeling:
  # - max_hours: 48      # å°‡æœ€é•·æŒå€‰æ™‚é–“å»¶é•·åˆ° 24 å°æ™‚
  #   up_k: 10.5          # è¦æ±‚ 2.5 å€ ATR çš„æ­¢ç›ˆè·é›¢
  #   dn_k: 10.5          # å°æ‡‰ 2.5 å€ ATR çš„æ­¢æè·é›¢
    # ç­–ç•¥ 1: æˆ‘å€‘ç›®å‰æ•ˆæœæœ€å¥½çš„è¨­å®š
  - max_hours: 4
    up_k: 2.5
    dn_k: 2.5
  # ç­–ç•¥ 2: å˜—è©¦ç¨å¾®æ›´é•·ç·šçš„è¨­å®š
  - max_hours: 8
    up_k: 5.0
    dn_k: 5.0
  # ç­–ç•¥ 3: å˜—è©¦ç¨å¾®æ›´é•·ç·šçš„è¨­å®š
  - max_hours: 48
    up_k: 10.0
    dn_k: 10.0
  # ç­–ç•¥ 4: å˜—è©¦ç¨å¾®æ›´é•·ç·šçš„è¨­å®š
  - max_hours: 72
    up_k: 15.0
    dn_k: 15.0

ml_models:
  # - name: xgb
  #   # ğŸŸ¢ æ–°å¢ï¼šè¨Šè™Ÿç”Ÿæˆåƒæ•¸å€å¡Š
  #   signal_params:
  #   # ğŸŸ¢ æ ¸å¿ƒä¿®æ”¹ï¼šå®šç¾©å¤šå€‹ gap å€¼ä»¥ä¾›å…§éƒ¨è‡ªå‹•å°‹å„ª
  #     gap_threshold: [0.3, 0.6, 0.9, 0.12, 0.15]  # åœ¨æ­¤è™•èª¿æ•´è¨Šè™Ÿä¿¡å¿ƒé–€æª» (0.05 ~ 0.2)

  #   params:
  #     # ğŸŸ¢ å¯¦é©—æ–°åƒæ•¸çµ„åˆ
  #     objective: ["multi:softprob"] # ä¿æŒä¸‰åˆ†é¡
  #     eval_metric: ["mlogloss"]
  #     n_estimators: [150, 200]      # å¢åŠ æ¨¹çš„æ•¸é‡
  #     max_depth: [4, 5]           # ç¨å¾®åŠ æ·±æ¨¹
  #     learning_rate: [0.03, 0.05, 0.07]
  #     subsample: [0.8]        # éš¨æ©ŸæŠ½å– 80% çš„æ•¸æ“šä¾†è¨“ç·´æ¯æ£µæ¨¹
  #     colsample_bytree: [0.8]  # éš¨æ©ŸæŠ½å– 80% çš„ç‰¹å¾µä¾†è¨“ç·´æ¯æ£µæ¨¹
  #     gamma: [0, 0.1, 0.2]
  #     min_child_weight: [1, 3]

  # - name: lstm
  #   params:
  #     seq_len: 60
  #     hidden_dim: 64
  #     batch_size: 32
  #     epochs: 10
  #     lr: 0.001

  # - name: hybrid
  #   params:
  #     seq_len: 60
  #     hidden_dim: 64
  #     emb_dim: 32
  #     epochs: 8
  #     lr: 0.001
  #     xgb:
  #       max_depth: 3
  #       n_estimators: 50
  #       learning_rate: 0.1
  #       objective: binary:logistic

strategies:
  - name: macd_divergence
    params:
      peak_window: [5, 10, 15]

  # - name: bollinger
  #   params:
  #     length: [10, 15, 20]
  #     stddev: [0.5, 0.8, 1.0, 1.5, 2.0]

  # - name: bollinger_reversal
  #   params:
  #     length: [10, 15, 20]
  #     stddev: [0.5, 0.8, 1.0, 1.5, 2.0]

  # - name: ema_cross
  #   params:
  #     fast: [5, 10, 15]
  #     slow: [20, 30, 50]

  # - name: z_score
  #   params:
  #     sma_len: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50]
  #     z_th: [0.5, 1.0, 1.5, 2.0, 2.5, 3.0]

  # - name: z_score_reverse
  #   params:
  #     sma_len: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50]
  #     z_th: [0.5, 1.0, 1.5, 2.0, 2.5, 3.0]

  # - name: rsi_scalper
  #   params:
  #     bb_len: [10, 15, 20]
  #     bb_std: [0.5, 0.8, 1.0, 1.5, 2.0]

# overrides:
#   - symbol: BTCUSDT
#     tf: 15m
#     ml_models:
#       - name: lstm_xgb
#         params:
#           seq_len: 60
#           hidden_dim: 64
#           emb_dim: 32
#     strategies:
#       - name: ema_cross
#         params:
#           fast: [5, 10, 15]
#           slow: [20, 30, 50]

auto_policy:
  gate:
    min_sharpe: 0.8
    max_mdd: 0.2
    min_trades: 30
    min_acc: 0.55
  weights:
    sharpe: 0.4
    winrate: 0.2
    mdd: 0.2
    trades: 0.1
    val_acc: 0.1

debug: true   # è¨­ false å°±æœƒåªçœ‹åˆ° INFO log
